<!DOCTYPE html>
<html lang="zh-CN" style="background-color: white">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="../assets/css/main.css">
        <link rel="stylesheet" href="../assets/libs/particles/css/style.css">
	    <link rel="stylesheet" href="../assets/css/base.css">
        <link rel="stylesheet" href="../assets/css/login.css" />
        <link rel="stylesheet" href="../assets/css/comment.css">
        <link rel="stylesheet" href="../assets/css/layout.css">
        <title>博客</title>
    </head>
    <body onload="rewrite_blog()">
        <!-- particles.js container -->
        <div id="particles-js"></div>
        <div id="background">
            <div class="layout_left">
                <div class="side-bar">
                <div class="header">
                    <a onclick="reback()" class="logo">返回</a>
                </div>
            </div>
            </div>
            <div class="layout_right">
                <div class="main">
                <div class="article">
                    <form>
                        <ul class="article">
                            <li >
                                <textarea id="mytitle" type="text" class="title"  placeholder="标题" style="width: 5cm;height: 1cm;"></textarea>
                            </li>
                            <li >
                                <textarea id="mycontent" class="content"  style="width:16cm;height:20cm;font-size: 20px;" placeholder="输入博客"></textarea>
                            </li>
                        </ul>
                        <button type="button" class="submit_btn" id="btnSubmit" onclick="modify_blog()" style="width: 5cm;">提交</button>
                    </form>
                </div>
                </div>
            </div>
        </div>
        <script src="../assets/libs/jquery-1.12.4/jquery.min.js"></script>
	    <script src="../assets/libs/sweetalert2/sweetalert2.min.js"></script>
	    <script src="../assets/libs/particles/particles.min.js"></script>
	    <script src="../assets/libs/particles/js/app.js"></script>
	    <script src="../assets/route_conf.js"></script>
	    <script src="../assets/util/md5.js"></script>
	    <script src="../assets/util/request.js"></script>
        <script>
            redirect_login();
        </script>>
        <script>
            function reback(){
                window.location.replace("article.html?blog_id="+getParams("blog_id"));
            }
        </script>
        <script>
            blogid = getParams("blog_id");
            function rewrite_blog(){       
                data = {
                    blog_id:blogid
                }
                request_get(
    		        "/blog/article",data,
				    function (d) {
					    if(d.status == 200){
                            var data = d.data;
                            document.getElementById("mytitle").innerHTML=data.title;
                            document.getElementById("mycontent").innerHTML = data.content;
					    }else{
					        alert(d.message);
					    } 
                    }
                )
            }
        </script>
        <script>
            function modify_blog(){
                blogid=getParams("blog_id");
                data={
                    blog_id:blogid,
                    title:$('#mytitle').val(),
                    content:$('#mycontent').val()
                }
                post(
                    "/blog/modify_blog",data,
                    function(d){
                        if(d.status == 200){
                            alert(d.message);
                            window.location.replace("article.html?blog_id="+getParams("blog_id"));
                        }
                        else{
                            alert(d.message);
                        }
                    }
                )
            }
        </script>
</body>
</html>